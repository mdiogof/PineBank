<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resgatar Investimento | Pineapple</title>
    <link rel="stylesheet" href="style-conta.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="modal-overlay" style="display: flex;"> <div class="modal-content" style="max-width: 450px;">
            <a href="investimentos.html" class="modal-close">&times;</a>
            
            <h2 style="color: var(--verde-principal);">Realizar Resgate</h2>
            <p style="color: var(--cor-secundaria);">O valor será creditado na sua conta corrente em até 1 dia útil (D+1).</p>
            
            <form onsubmit="
                const amount = parseFloat(document.getElementById('valor-resgate').value.replace(',', '.'));
                const productType = document.getElementById('investimento-origem').value.toLowerCase();
                
                if(handleInvestmentMovement('credit', amount, productType)) { 
                    alert('Resgate de ' + formatCurrency(amount) + ' solicitado com sucesso! Seu saldo será creditado.');
                    window.location.href='investimentos.html';
                }
                return false; /* Impede o envio tradicional do formulário */
            ">
                
                <div class="input-group">
                    <label for="investimento-origem">Investimento de Origem</label>
                    <select id="investimento-origem" required onchange="updateInvestedBalance()">
                        </select>
                </div>
                
                <p class="balance-invest-info" id="saldo-investido-disponivel">Selecione um investimento para ver o saldo.</p>

                <div class="input-group">
                    <label for="valor-resgate">Valor do Resgate (R$)</label>
                    <input type="number" id="valor-resgate" min="1" step="0.01" placeholder="Ex: 500,00" required>
                </div>
                
                <button type="submit" class="button button-danger large-button" style="margin-top: 15px;">
                    Confirmar Resgate
                </button>

                <a href="investimentos.html" class="btn-voltar-simples" style="display: block; text-align: center; margin-top: 15px;">Cancelar</a>
            </form>
        </div>
    </div>
    <script src="bank-system.js"></script>
    <script src="app-invest-modal.js"></script>
</body>
</html>